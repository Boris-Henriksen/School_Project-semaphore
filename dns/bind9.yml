- hosts: dns
  become: true
  vars_files:
    - dns/vars/bind9_forward_vars.yml
    - dns/vars/bind9_reverse_vars.yml
  tasks:
    - name: Install BIND9
      apt:
        name: bind9
        state: present
        update_cache: yes

    - name: Include forward zone tasks
      include_tasks: dns/forward_zone.yml

    - name: Include reverse zone tasks
      include_tasks: dns/reverse_zones.yml

  handlers:
    - name: restart bind9
      service:
        name: bind9
        state: restarted
